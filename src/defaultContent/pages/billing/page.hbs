<!--
 * Copyright (c) 2025, WSO2 LLC. (http://www.wso2.com) All Rights Reserved.
 *
 * WSO2 LLC. licenses this file to you under the Apache License,
 * Version 2.0 (the "License"); you may not use this file except
 * in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing,
 * software distributed under the License is distributed on an
 * "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
 * KIND, either express or implied. See the License for the
 * specific language governing permissions and limitations
 * under the License.
 */
 -->
<style>
    @import url('/styles/billing.css');
</style>

<div data-org-id="{{orgId}}">
    {{> header profile=profile baseUrl=baseUrl devportalMode=devportalMode }}
    {{> sidebar profile=profile baseUrl=baseUrl devportalMode=devportalMode }}
    {{> billing-content }}
    {{> alert }}
</div>

<script>
    // Test 1: Basic JavaScript execution
    alert('TEST: JavaScript is running!');
    console.log('TEST 1: Page loaded');
    console.log('TEST 2: orgId =', '{{orgId}}');
    console.log('TEST 3: Current URL =', window.location.href);
</script>

<script>
    console.log('üìÑ Billing page template rendered - ' + new Date().toISOString());
    console.log('üåê Current URL:', window.location.href);
    
    // Clear any cached scripts
    var cacheBuster = '?v=' + Date.now();
    var scriptUrl = window.location.origin + '/technical-scripts/billing.js' + cacheBuster;
    
    console.log('üîç Loading billing.js from:', scriptUrl);
    
    // Dynamically load the script to avoid path and caching issues
    var script = document.createElement('script');
    script.src = scriptUrl;
    script.type = 'text/javascript';
    script.async = false;
    
    script.onload = function() {
        console.log('‚úÖ billing.js loaded and executed successfully!');
        console.log('‚úÖ Window functions exposed:', {
            loadUsageData: typeof window.loadUsageData,
            loadInvoices: typeof window.loadInvoices,
            loadPaymentDetails: typeof window.loadPaymentDetails
        });
    };
    
    script.onerror = function(error) {
        console.error('‚ùå FAILED to load billing.js');
        console.error('‚ùå Attempted URL:', scriptUrl);
        console.error('‚ùå Error:', error);
        alert('Failed to load billing.js from: ' + scriptUrl);
    };
    
    document.body.appendChild(script);
    console.log('üìå Script tag appended to body');
</script>
