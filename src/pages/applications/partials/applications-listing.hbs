<head>
  <link rel='stylesheet' href='/technical-styles/applications.css' />
  <script src='/technical-scripts/application-listing.js' defer></script>
  <script src='/technical-scripts/add-application-form.js' defer></script>
</head>

<section class="section mt-0 mb-6">
  <div class="container-fluid applicationspage-container" id="applicationsContainer">
    <div class="container-header mb-4">Applications</div>

    <div class="row row-gap-4">
      <!-- Create application Card -->
      <div class="col-12 col-md-4 col-lg-3">
        <div class="card create-project-card" style="cursor: pointer;" onclick="showApplicationForm(this)">
          <div class="create-project-content">
              <span class="plus-icon">+</span>
              <span class="create-text">Create Application</span>
          </div>
          <div class="application-create-card d-none">
            <div class="app-header">
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"
                    onclick="event.stopPropagation(); hideApplicationForm(this);"></button>
            </div>
            <div class="app-create-body">
                <form id='applicationForm' class='create-app-form'>
                    <!-- Application Name -->
                    <div class='mb-3'>
                        <input type='text' id='applicationName' class='form-control'
                            placeholder='Name' required />
                        <div id='nameError' class='error-msg text-danger mt-1' style='visibility: hidden;'>
                            Application name cannot be empty.</div>
                    </div>
                    <!-- Create Button -->
                    <div class='d-flex gap-3 mt-4'>
                        <button type='submit' class='common-btn-primary' id='saveButton' disabled>
                            Save
                        </button>
                    </div>
                </form>
            </div>
        </div>
       </div>
      </div>

      <!-- Application Cards -->
      {{#applicationsMetadata}}

      <div class="col-12 col-md-4 col-lg-3">
        <div class="card application-card" id="app-card-{{applicationId}}" data-name="{{name}}" style="cursor: pointer;"
          onclick="window.location.href='{{../baseUrl}}/applications/{{id}}'">
          <div class="application-layout">
            <div class="application-icon-container">
              <img src="https://raw.githubusercontent.com/wso2/docs-bijira/refs/heads/main/en/devportal-theming/application.svg" alt="Application icon" />
            </div>
            <div class="application-content">
              <div class="application-card-header">
                <div class="overflow-hidden">
                  <div>
                    <a href="{{../baseUrl}}/applications/{{id}}" class="application-name-link">
                      {{name}}
                    </a>
                  </div>
                </div>
              </div>
              <div class="application-card-body">
                <div>
                  <span class="subscription-count-badge">
                    Subscriptions: {{subscriptionCount}}
                  </span>
                </div>
                <div class="application-card-meta">
                  <p class="fw-light application-description">
                    <span class="truncate-text">{{description}}</span>
                  </p>
                </div>
              </div>
              <div class="application-card-footer">
                <div class="application-card-actions">
                  <button type="button" class="btn application-btn-icon delete-button" title="Delete"
                    onclick="event.stopPropagation(); openDeleteModal('{{id}}', '')">
                    <i class="bi bi-trash"></i>
                  </button>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
      {{/applicationsMetadata}}
    </div>
  </div>
</section>